#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("aws-cdk-lib");
const cognito_stack_1 = require("../lib/cognito/cognito-stack");
const api_gw_stack_1 = require("../lib/api-gw/api-gw-stack");
const front_deployment_stack_1 = require("../lib/front-deployment/front-deployment-stack");
const data_stack_1 = require("../lib/data/data-stack");
const lambda_stack_1 = require("../lib/lambda/lambda-stack");
const app = new cdk.App();
new cognito_stack_1.CognitoStack(app, "CognitoStack", {});
const dataStack = new data_stack_1.DataStack(app, "DataStack", {});
const lambdaStack = new lambda_stack_1.LambdaStack(app, "LambdaStack", {
    moviesBucket: dataStack.moviesBucket,
    moviesDataTable: dataStack.moviesDataTable,
    subscriptionsDataTable: dataStack.subscriptionsDataTable,
    movieRatingsTable: dataStack.movieRatingsTable,
});
new api_gw_stack_1.ApiGwStack(app, "ApiGwStack", {
    uploadMovieFn: lambdaStack.uploadMovieFn,
    downloadMovieFn: lambdaStack.downloadMovieFn,
    getMoviesFn: lambdaStack.getMoviesFn,
    deleteMovieFn: lambdaStack.deleteMovieFn,
    getSingleMovieFn: lambdaStack.getSingleMovieFn,
    getSubscriptionsFn: lambdaStack.getSubscriptionsFn,
    subscribeFn: lambdaStack.subscribeFn,
    unsubscribeFn: lambdaStack.unsubscribeFn,
    editMovieFn: lambdaStack.editMovieFn,
    rateMovieFn: lambdaStack.rateMovieFn,
});
new front_deployment_stack_1.FrontDeploymentStack(app, "FrontDeploymentStack", {});
app.synth();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xvdWQtbW92aWVzLWJlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY2xvdWQtbW92aWVzLWJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHVDQUFxQztBQUNyQyxtQ0FBbUM7QUFDbkMsZ0VBQTREO0FBQzVELDZEQUF3RDtBQUN4RCwyRkFBc0Y7QUFDdEYsdURBQW1EO0FBQ25ELDZEQUF5RDtBQUV6RCxNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUUxQixJQUFJLDRCQUFZLENBQUMsR0FBRyxFQUFFLGNBQWMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUUxQyxNQUFNLFNBQVMsR0FBRyxJQUFJLHNCQUFTLENBQUMsR0FBRyxFQUFFLFdBQVcsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUV0RCxNQUFNLFdBQVcsR0FBRyxJQUFJLDBCQUFXLENBQUMsR0FBRyxFQUFFLGFBQWEsRUFBRTtJQUN0RCxZQUFZLEVBQUUsU0FBUyxDQUFDLFlBQVk7SUFDcEMsZUFBZSxFQUFFLFNBQVMsQ0FBQyxlQUFlO0lBQzFDLHNCQUFzQixFQUFFLFNBQVMsQ0FBQyxzQkFBc0I7SUFDeEQsaUJBQWlCLEVBQUUsU0FBUyxDQUFDLGlCQUFpQjtDQUMvQyxDQUFDLENBQUM7QUFFSCxJQUFJLHlCQUFVLENBQUMsR0FBRyxFQUFFLFlBQVksRUFBRTtJQUNoQyxhQUFhLEVBQUUsV0FBVyxDQUFDLGFBQWE7SUFDeEMsZUFBZSxFQUFFLFdBQVcsQ0FBQyxlQUFlO0lBQzVDLFdBQVcsRUFBRSxXQUFXLENBQUMsV0FBVztJQUNwQyxhQUFhLEVBQUUsV0FBVyxDQUFDLGFBQWE7SUFDeEMsZ0JBQWdCLEVBQUUsV0FBVyxDQUFDLGdCQUFnQjtJQUM5QyxrQkFBa0IsRUFBRSxXQUFXLENBQUMsa0JBQWtCO0lBQ2xELFdBQVcsRUFBRSxXQUFXLENBQUMsV0FBVztJQUNwQyxhQUFhLEVBQUUsV0FBVyxDQUFDLGFBQWE7SUFDeEMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxXQUFXO0lBQ3BDLFdBQVcsRUFBRSxXQUFXLENBQUMsV0FBVztDQUNyQyxDQUFDLENBQUM7QUFFSCxJQUFJLDZDQUFvQixDQUFDLEdBQUcsRUFBRSxzQkFBc0IsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUUxRCxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIjIS91c3IvYmluL2VudiBub2RlXHJcbmltcG9ydCBcInNvdXJjZS1tYXAtc3VwcG9ydC9yZWdpc3RlclwiO1xyXG5pbXBvcnQgKiBhcyBjZGsgZnJvbSBcImF3cy1jZGstbGliXCI7XHJcbmltcG9ydCB7IENvZ25pdG9TdGFjayB9IGZyb20gXCIuLi9saWIvY29nbml0by9jb2duaXRvLXN0YWNrXCI7XHJcbmltcG9ydCB7IEFwaUd3U3RhY2sgfSBmcm9tIFwiLi4vbGliL2FwaS1ndy9hcGktZ3ctc3RhY2tcIjtcclxuaW1wb3J0IHsgRnJvbnREZXBsb3ltZW50U3RhY2sgfSBmcm9tIFwiLi4vbGliL2Zyb250LWRlcGxveW1lbnQvZnJvbnQtZGVwbG95bWVudC1zdGFja1wiO1xyXG5pbXBvcnQgeyBEYXRhU3RhY2sgfSBmcm9tIFwiLi4vbGliL2RhdGEvZGF0YS1zdGFja1wiO1xyXG5pbXBvcnQgeyBMYW1iZGFTdGFjayB9IGZyb20gXCIuLi9saWIvbGFtYmRhL2xhbWJkYS1zdGFja1wiO1xyXG5cclxuY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKTtcclxuXHJcbm5ldyBDb2duaXRvU3RhY2soYXBwLCBcIkNvZ25pdG9TdGFja1wiLCB7fSk7XHJcblxyXG5jb25zdCBkYXRhU3RhY2sgPSBuZXcgRGF0YVN0YWNrKGFwcCwgXCJEYXRhU3RhY2tcIiwge30pO1xyXG5cclxuY29uc3QgbGFtYmRhU3RhY2sgPSBuZXcgTGFtYmRhU3RhY2soYXBwLCBcIkxhbWJkYVN0YWNrXCIsIHtcclxuICBtb3ZpZXNCdWNrZXQ6IGRhdGFTdGFjay5tb3ZpZXNCdWNrZXQsXHJcbiAgbW92aWVzRGF0YVRhYmxlOiBkYXRhU3RhY2subW92aWVzRGF0YVRhYmxlLFxyXG4gIHN1YnNjcmlwdGlvbnNEYXRhVGFibGU6IGRhdGFTdGFjay5zdWJzY3JpcHRpb25zRGF0YVRhYmxlLFxyXG4gIG1vdmllUmF0aW5nc1RhYmxlOiBkYXRhU3RhY2subW92aWVSYXRpbmdzVGFibGUsXHJcbn0pO1xyXG5cclxubmV3IEFwaUd3U3RhY2soYXBwLCBcIkFwaUd3U3RhY2tcIiwge1xyXG4gIHVwbG9hZE1vdmllRm46IGxhbWJkYVN0YWNrLnVwbG9hZE1vdmllRm4sXHJcbiAgZG93bmxvYWRNb3ZpZUZuOiBsYW1iZGFTdGFjay5kb3dubG9hZE1vdmllRm4sXHJcbiAgZ2V0TW92aWVzRm46IGxhbWJkYVN0YWNrLmdldE1vdmllc0ZuLFxyXG4gIGRlbGV0ZU1vdmllRm46IGxhbWJkYVN0YWNrLmRlbGV0ZU1vdmllRm4sXHJcbiAgZ2V0U2luZ2xlTW92aWVGbjogbGFtYmRhU3RhY2suZ2V0U2luZ2xlTW92aWVGbixcclxuICBnZXRTdWJzY3JpcHRpb25zRm46IGxhbWJkYVN0YWNrLmdldFN1YnNjcmlwdGlvbnNGbixcclxuICBzdWJzY3JpYmVGbjogbGFtYmRhU3RhY2suc3Vic2NyaWJlRm4sXHJcbiAgdW5zdWJzY3JpYmVGbjogbGFtYmRhU3RhY2sudW5zdWJzY3JpYmVGbixcclxuICBlZGl0TW92aWVGbjogbGFtYmRhU3RhY2suZWRpdE1vdmllRm4sXHJcbiAgcmF0ZU1vdmllRm46IGxhbWJkYVN0YWNrLnJhdGVNb3ZpZUZuLFxyXG59KTtcclxuXHJcbm5ldyBGcm9udERlcGxveW1lbnRTdGFjayhhcHAsIFwiRnJvbnREZXBsb3ltZW50U3RhY2tcIiwge30pO1xyXG5cclxuYXBwLnN5bnRoKCk7XHJcbiJdfQ==